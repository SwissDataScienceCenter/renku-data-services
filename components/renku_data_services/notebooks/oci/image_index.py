# generated by datamodel-codegen:
#   filename:  https://raw.githubusercontent.com/opencontainers/image-spec/refs/tags/v1.1.1/schema/image-index-schema.json
#   timestamp: 2025-11-06T08:57:17+00:00

from __future__ import annotations

from typing import Any, Mapping, Optional, Sequence

from pydantic import AnyUrl, ConfigDict, Field, RootModel
from renku_data_services.notebooks.oci.base_model import BaseOciModel


class Platform(BaseOciModel):
    model_config = ConfigDict(
        extra="allow",
    )
    architecture: str
    os: str
    os_version: Optional[str] = Field(default=None, alias="os.version")
    os_features: Optional[Sequence[str]] = Field(default=None, alias="os.features")
    variant: Optional[str] = None


class Int8(RootModel[int]):
    root: int = Field(..., ge=-128, le=127)


class Int16(RootModel[int]):
    root: int = Field(..., ge=-32768, le=32767)


class Int32(RootModel[int]):
    root: int = Field(..., ge=-2147483648, le=2147483647)


class Uint8(RootModel[int]):
    root: int = Field(..., ge=0, le=255)


class Uint16(RootModel[int]):
    root: int = Field(..., ge=0, le=65535)


class Uint32(RootModel[int]):
    root: int = Field(..., ge=0, le=4294967295)


class Uint64(RootModel[int]):
    root: int = Field(..., ge=0, le=18446744073709552000)


class Uint16Pointer(RootModel[Optional[Uint16]]):
    root: Optional[Uint16]


class Uint64Pointer(RootModel[Optional[Uint64]]):
    root: Optional[Uint64]


class StringPointer(RootModel[Optional[str]]):
    root: Optional[str]


class MapStringObject(RootModel[Mapping[str, Mapping[str, Any]]]):
    root: Mapping[str, Mapping[str, Any]]


class ContentDescriptor(BaseOciModel):
    model_config = ConfigDict(
        extra="allow",
    )
    mediaType: str = Field(
        ...,
        description="the mediatype of the referenced object",
        pattern="^[A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}/[A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}$",
    )
    size: int = Field(
        ...,
        description="the size in bytes of the referenced object",
        ge=-9223372036854776000,
        le=9223372036854776000,
    )
    digest: str = Field(
        ...,
        description="the cryptographic checksum digest of the object, in the pattern '<algorithm>:<encoded>'",
        pattern="^[a-z0-9]+(?:[+._-][a-z0-9]+)*:[a-zA-Z0-9=_-]+$",
    )
    urls: Optional[Sequence[AnyUrl]] = Field(
        default=None,
        description="a list of urls from which this object may be downloaded",
    )
    data: Optional[str] = Field(
        default=None,
        description="an embedding of the targeted content (base64 encoded)",
    )
    artifactType: Optional[str] = Field(
        default=None,
        description="the IANA media type of this artifact",
        pattern="^[A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}/[A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}$",
    )
    annotations: Optional[Mapping[str, str]] = None


class Manifest(BaseOciModel):
    model_config = ConfigDict(
        extra="allow",
    )
    mediaType: str = Field(
        ...,
        description="the mediatype of the referenced object",
        pattern="^[A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}/[A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}$",
    )
    size: int = Field(
        ...,
        description="the size in bytes of the referenced object",
        ge=-9223372036854776000,
        le=9223372036854776000,
    )
    digest: str = Field(
        ...,
        description="the cryptographic checksum digest of the object, in the pattern '<algorithm>:<encoded>'",
        pattern="^[a-z0-9]+(?:[+._-][a-z0-9]+)*:[a-zA-Z0-9=_-]+$",
    )
    urls: Optional[Sequence[AnyUrl]] = Field(
        default=None,
        description="a list of urls from which this object may be downloaded",
    )
    platform: Optional[Platform] = None
    annotations: Optional[Mapping[str, str]] = None


class ImageIndex(BaseOciModel):
    model_config = ConfigDict(
        extra="allow",
    )
    schemaVersion: int = Field(
        ...,
        description="This field specifies the image index schema version as an integer",
        ge=2,
        le=2,
    )
    mediaType: Optional[str] = Field(
        default=None,
        description="the mediatype of the referenced object",
        pattern="^[A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}/[A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}$",
    )
    artifactType: Optional[str] = Field(
        default=None,
        description="the artifact mediatype of the referenced object",
        pattern="^[A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}/[A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}$",
    )
    subject: Optional[ContentDescriptor] = None
    manifests: Sequence[Manifest]
    annotations: Optional[Mapping[str, str]] = None
