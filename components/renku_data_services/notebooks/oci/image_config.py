# generated by datamodel-codegen:
#   filename:  https://raw.githubusercontent.com/opencontainers/image-spec/26647a49f642c7d22a1cd3aa0a48e4650a542269/schema/config-schema.json
#   timestamp: 2025-11-06T08:57:15+00:00

from __future__ import annotations

from collections.abc import Mapping, Sequence
from datetime import datetime
from enum import Enum
from typing import Any, Optional

from pydantic import ConfigDict, Field, RootModel

from renku_data_services.notebooks.oci.base_model import BaseOciModel


class Type(Enum):
    layers = "layers"


class Rootfs(BaseOciModel):
    model_config = ConfigDict(
        extra="allow",
    )
    diff_ids: Sequence[str]
    type: Type


class HistoryItem(BaseOciModel):
    model_config = ConfigDict(
        extra="allow",
    )
    created: Optional[datetime] = None
    author: Optional[str] = None
    created_by: Optional[str] = None
    comment: Optional[str] = None
    empty_layer: Optional[bool] = None


class Int8(RootModel[int]):
    root: int = Field(..., ge=-128, le=127)


class Int16(RootModel[int]):
    root: int = Field(..., ge=-32768, le=32767)


class Int32(RootModel[int]):
    root: int = Field(..., ge=-2147483648, le=2147483647)


class Int64(RootModel[int]):
    root: int = Field(..., ge=-9223372036854776000, le=9223372036854776000)


class Uint8(RootModel[int]):
    root: int = Field(..., ge=0, le=255)


class Uint16(RootModel[int]):
    root: int = Field(..., ge=0, le=65535)


class Uint32(RootModel[int]):
    root: int = Field(..., ge=0, le=4294967295)


class Uint64(RootModel[int]):
    root: int = Field(..., ge=0, le=18446744073709552000)


class Uint16Pointer(RootModel[Optional[Uint16]]):
    root: Optional[Uint16]


class Uint64Pointer(RootModel[Optional[Uint64]]):
    root: Optional[Uint64]


class Base64(RootModel[str]):
    root: str


class StringPointer(RootModel[Optional[str]]):
    root: Optional[str]


class Config(BaseOciModel):
    model_config = ConfigDict(
        extra="allow",
    )
    User: Optional[str] = None
    ExposedPorts: Optional[Mapping[str, Mapping[str, Any]]] = None
    Env: Optional[Sequence[str]] = None
    Entrypoint: Optional[Sequence[str]] = None
    Cmd: Optional[Sequence[str]] = None
    Volumes: Optional[Mapping[str, Mapping[str, Any]]] = None
    WorkingDir: Optional[str] = None
    Labels: Optional[Mapping[str, str]] = None
    StopSignal: Optional[str] = None
    ArgsEscaped: Optional[bool] = None


class ImageConfig(BaseOciModel):
    model_config = ConfigDict(
        extra="allow",
    )
    created: Optional[datetime] = None
    author: Optional[str] = None
    architecture: str
    variant: Optional[str] = None
    os: str
    os_version: Optional[str] = Field(default=None, alias="os.version")
    os_features: Optional[Sequence[str]] = Field(default=None, alias="os.features")
    config: Optional[Config] = None
    rootfs: Rootfs
    history: Optional[Sequence[HistoryItem]] = None
